(this.webpackJsonpvgig=this.webpackJsonpvgig||[]).push([[0],{1008:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(29),o=a.n(c),l=(a(882),a(53)),i=a(136),u=a(38),s=a(55),m=a(13),h=a(1042),d=a(1044),f=a(1045),v=a(1043),g=a(689),p=a.n(g).a.connect("wss://try:try@broker.shiftr.io"),b=144,E=function(){var e=Object(n.useState)(1),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(60),l=Object(m.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)(100),g=Object(m.a)(s,2),E=g[0],j=g[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{value:a,onChange:function(e){c(e.target.value)}},r.a.createElement(f.a,{value:1},"percussion (ch. 1)"),r.a.createElement(f.a,{value:2},"violin (ch. 2)"),r.a.createElement(f.a,{value:3},"3"),r.a.createElement(f.a,{value:4},"4"),r.a.createElement(f.a,{value:5},"5"),r.a.createElement(f.a,{value:6},"6"),r.a.createElement(f.a,{value:7},"7"),r.a.createElement(f.a,{value:8},"8"),r.a.createElement(f.a,{value:9},"9"),r.a.createElement(f.a,{value:10},"10"),r.a.createElement(f.a,{value:11},"11"),r.a.createElement(f.a,{value:12},"12"),r.a.createElement(f.a,{value:13},"13"),r.a.createElement(f.a,{value:14},"14"),r.a.createElement(f.a,{value:15},"15"),r.a.createElement(f.a,{value:16},"16")),r.a.createElement(d.a,{label:"note",variant:"outlined",type:"number",value:i,onChange:function(e){u(e.target.value)}}),r.a.createElement(d.a,{label:"velocity",variant:"outlined",type:"number",value:E,onChange:function(e){j(e.target.value)}}),r.a.createElement(h.a,{variant:"contained",color:"primary",onClick:function(){p.publish("vgig/midi",JSON.stringify(function(e,t,a){return{channel:e,status:b,note:t,velocity:a||127}}(a,i,E)))}},"trigger test sample"))},j=a(70);function O(){var e=Object(l.a)(["\n  margin-top: 92px;\n  text-align: center;\n"]);return O=function(){return e},e}function y(){var e=Object(l.a)(["\n  p {\n    margin-top: 24px;\n    margin-bottom: 24px;\n  }\n"]);return y=function(){return e},e}function w(){var e=Object(l.a)([""]);return w=function(){return e},e}function M(){var e=Object(l.a)(["\n  position: fixed;\n  padding: 25px;\n  top: 0;\n  right: 0%;\n"]);return M=function(){return e},e}function x(){var e=Object(l.a)(["\n  max-width: 768px;\n  margin: auto;\n  margin-top: 100px;\n"]);return x=function(){return e},e}var S=a(839).version,k=s.a.div(x()),C=s.a.div(M()),A=s.a.section(w()),B=s.a.section(y()),I=s.a.div(O()),G=function(){var e=Object(n.useState)(function(e){for(var t="",a="abcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t}(4)),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(u.f)();return r.a.createElement(k,null,r.a.createElement(C,null,S),r.a.createElement(A,null,"Welcome to vgig,",r.a.createElement("br",null),"the virtual concert hall for everyone."),r.a.createElement(B,null,r.a.createElement("p",null),r.a.createElement(I,null,r.a.createElement(d.a,{value:a,onChange:function(e){return c(e.target.value)}}),r.a.createElement(h.a,{onClick:function(){"running"!==j.e.state&&j.e.resume(),o.push("halls/".concat(a))}},"enter"))))},N=a(12),R=a(1),J=a(149),L=a(166),z=a(20),T=a(153),W=["#A2CCB6","#FCEEB5","#EE786E","#e0feff","lightpink","lightblue"],q=["planeBufferGeometry","planeBufferGeometry","planeBufferGeometry"],P=function(e){var t=Math.random();return{position:[100-200*Math.random(),100-200*Math.random(),1.5*e],color:W[Math.round(Math.random()*(W.length-1))],scale:[1+14*t,1+14*t,1],rotation:[0,0,R.Math.degToRad(45*Math.round(Math.random()))]}},_=new Array(35).fill().map((function(){return{shape:q[Math.round(Math.random()*(q.length-1))],color:W[Math.round(Math.random()*(W.length-1))],args:[.1+9*Math.random(),.1+9*Math.random(),10]}}));function F(){var e=Object(T.b)(35,(function(e){return Object(N.a)({from:P(e)},P(e),{config:{mass:20,tension:150,friction:50}})})),t=Object(m.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){setInterval((function(){return c((function(e){return Object(N.a)({},P(e),{delay:40*e})}))}),3e3)}),[c]),_.map((function(e,t){return r.a.createElement(T.a.mesh,Object.assign({key:t},a[t],{castShadow:!0,receiveShadow:!0}),r.a.createElement("boxBufferGeometry",{args:e.args}),r.a.createElement(T.a.meshStandardMaterial,{color:a[t].color,roughness:.75,metalness:.5}))}))}function V(){return r.a.createElement("group",null,r.a.createElement("pointLight",{intensity:.3}),r.a.createElement("ambientLight",{intensity:2}),r.a.createElement("spotLight",{castShadow:!0,intensity:.2,angle:Math.PI/7,position:[150,150,250],penumbra:1,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048}))}var $=function(){return r.a.createElement(z.a,{style:{background:"rgb(0,0,0)"},camera:{position:[0,0,100],fov:1e3}},r.a.createElement(V,null),r.a.createElement("mesh",{receiveShadow:!0},r.a.createElement("planeBufferGeometry",{args:[1e3,1e3]}),r.a.createElement("meshStandardMaterial",{color:"#A2ACB6",roughness:1})),r.a.createElement(F,null),r.a.createElement(J.a,null))},H=(a(1007),a(852)),K=a.n(H),D=a(853),Q=a.n(D);function U(){var e=Object(l.a)(["\n  width: 100%;\n  height: 66%;\n"]);return U=function(){return e},e}var X={C3:K.a},Y={C3:Q.a},Z=s.a.div(U());function ee(e){var t=e.curve,a=e.width,c=e.color,o=e.speed,l=Object(n.useRef)();return Object(z.g)((function(){return l.current.uniforms.dashOffset.value-=o})),r.a.createElement("mesh",null,r.a.createElement("meshLine",{attach:"geometry",vertices:t}),r.a.createElement("meshLineMaterial",{attach:"material",ref:l,transparent:!0,depthTest:!1,lineWidth:a,color:c,dashArray:.1,dashRatio:.9}))}function te(e){var t=e.count,a=e.colors;return Object(n.useMemo)((function(){return new Array(t).fill().map((function(){var e=new R.Vector3(10-20*Math.random(),10-20*Math.random(),10-20*Math.random()),t=new Array(30).fill().map((function(){return e.add(new R.Vector3(4-8*Math.random(),4-8*Math.random(),2-4*Math.random())).clone()})),n=new R.CatmullRomCurve3(t).getPoints(1e3);return{color:a[parseInt(a.length*Math.random())],width:Math.max(.1,.65*Math.random()),speed:Math.max(1e-4,5e-4*Math.random()),curve:n}}))}),[a,t]).map((function(e,t){return r.a.createElement(ee,Object.assign({key:t},e))}))}Object(z.e)(L);var ae=function(e){var t=e.id,a=Object(n.useState)(null),c=Object(m.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)(null),u=Object(m.a)(i,2),s=u[0],h=u[1];return Object(n.useEffect)((function(){var e=new j.d(X);e.volume.value=-6;var t=new j.a(.6,5e3),a=new j.c({delayTime:"32n",feedback:.7,wet:.25});e.volume.value=0,e.connect(a),a.connect(t),t.connect(j.b),l(e);var n=new j.d(Y);n.volume.value=0,n.connect(j.b),h(n)}),[]),Object(n.useEffect)((function(){p.on("message",(function(e,t){var a=JSON.parse(t.toString()),n=a.channel,r=a.note;a.velocity;if(a.status==b)switch(n){case 1:o&&o.triggerAttackRelease(r);break;case 2:s&&s.triggerAttackRelease(r)}})),p.on("connect",(function(){p.subscribe("".concat("vgig","/").concat(t,"/orchestra"))}))}),[o,s],(function(){p.unsubscribe(t)})),r.a.createElement(Z,null,r.a.createElement(z.a,{style:{background:"rgb(0,0,0)"},camera:{position:[0,0,10],fov:25}},r.a.createElement(te,{count:20,colors:["rgb(100,0,0)","#222","#aaa","#e0feff","rgb(100,0,60)","rgb(127,32,64)"]}),r.a.createElement(J.a,null)))},ne=function(e){for(var t="",a="abcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t},re=r.a.createContext(),ce=function(e){var t=e.children,a=Object(n.useState)({userId:ne(8)}),c=Object(m.a)(a,2),o=c[0],l=c[1];return r.a.createElement(re.Provider,{value:[o,l]},t)},oe=re;function le(){var e=Object(l.a)(["\n    .audience {\n        width: 100%;\n        height: 33%;\n    }\n    width: 100%;\n    height: 100%;\n"]);return le=function(){return e},e}var ie=s.a.div(le()),ue=function(){var e=Object(u.g)().id,t=Object(n.useContext)(oe),a=Object(m.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){o(Object(N.a)({},c,{hallId:e})),console.log("send hello",c.userId,e)}),[e]),r.a.createElement(ie,null,r.a.createElement(ae,{className:"orchestra",id:e}),r.a.createElement($,{className:"audience",id:e}))};function se(){var e=Object(l.a)(["\nwidth: 100vw;\nheight: 100vh;\n"]);return se=function(){return e},e}var me=s.a.div(se()),he=function(){return r.a.createElement(me,null,r.a.createElement(i.a,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/conductor"},r.a.createElement(E,null)),r.a.createElement(u.a,{path:"/halls/:id"},r.a.createElement(ce,{value:oe},r.a.createElement(ue,null))),r.a.createElement(u.a,{path:"/"},r.a.createElement(G,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},839:function(e){e.exports=JSON.parse('{"name":"vgig","homepage":"https://thomasgeissl.github.io/vgig","version":"0.1.0","private":true,"dependencies":{"@material-ui/core":"^4.11.0","@material-ui/icons":"^4.9.1","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","drei":"^1.5.7","gh-pages":"^3.1.0","mqtt":"^4.2.1","react":"^16.13.1","react-dom":"^16.13.1","react-redux":"^7.2.1","react-router-dom":"^5.2.0","react-scripts":"3.4.3","react-spring":"^8.0.27","react-three-fiber":"^5.0.1","redux":"^4.0.5","styled-components":"^5.2.0","three":"^0.120.1","threejs-meshline":"^2.0.12","tone":"^14.7.39"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","deploy":"yarn build && gh-pages -d build","travisdeploy":"CI=false yarn build && gh-pages -d build -r https://$GH_TOKEN@github.com/thomasgeissl/vgig.git"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},852:function(e,t,a){e.exports=a.p+"static/media/A.5e794cdb.mp3"},853:function(e,t,a){e.exports=a.p+"static/media/violin_c3.bbc9708e.mp3"},878:function(e,t,a){e.exports=a(1008)},882:function(e,t,a){},885:function(e,t){},887:function(e,t){},956:function(e,t){},958:function(e,t){},981:function(e,t){},982:function(e,t){}},[[878,1,2]]]);
//# sourceMappingURL=main.7521c4d1.chunk.js.map