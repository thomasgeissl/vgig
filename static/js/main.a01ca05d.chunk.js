(this.webpackJsonpvgig=this.webpackJsonpvgig||[]).push([[0],{1e3:function(e,t){},1001:function(e,t){},1007:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(32),o=n.n(r),i=(n(880),n(48)),l=n(129),u=n(39),s=n(49),d=n(12),f=n(1039),h=n(1038),m=n(33);function p(){var e=Object(i.a)(["\n  margin-top: 92px;\n  text-align: center;\n"]);return p=function(){return e},e}function g(){var e=Object(i.a)(["\n  p {\n    margin-top: 24px;\n    margin-bottom: 24px;\n  }\n"]);return g=function(){return e},e}function b(){var e=Object(i.a)([""]);return b=function(){return e},e}function v(){var e=Object(i.a)(["\n  position: fixed;\n  padding: 25px;\n  top: 0;\n  right: 0%;\n"]);return v=function(){return e},e}function j(){var e=Object(i.a)(["\n  max-width: 768px;\n  margin: auto;\n  margin-top: 100px;\n"]);return j=function(){return e},e}var O=n(828).version,E=s.a.div(j()),w=s.a.div(v()),k=s.a.section(b()),x=s.a.section(g()),y=s.a.div(p()),C=function(){var e=Object(a.useState)(function(e){for(var t="",n="abcdefghijklmnopqrstuvwxyz0123456789",a=n.length,c=0;c<e;c++)t+=n.charAt(Math.floor(Math.random()*a));return t}(4)),t=Object(d.a)(e,2),n=t[0],r=t[1],o=Object(u.f)();return c.a.createElement(E,null,c.a.createElement(w,null,O),c.a.createElement(k,null,"Welcome to vgig,",c.a.createElement("br",null),"the virtual concert hall for everyone."),c.a.createElement(x,null,c.a.createElement("p",null),c.a.createElement(y,null,c.a.createElement(h.a,{value:n,onChange:function(e){return r(e.target.value)}}),c.a.createElement(f.a,{onClick:function(){"running"!==m.j.state&&m.j.resume(),o.push("halls/".concat(n))}},"enter"))))},M=n(13),S=n(1),I=n(141),A=n(18),R=n(145),B=["#A2CCB6","#FCEEB5","#EE786E","#e0feff","lightpink","lightblue"],_=["planeBufferGeometry","planeBufferGeometry","planeBufferGeometry"],z=function(e){var t=Math.random();return{position:[100-200*Math.random(),100-200*Math.random(),1.5*e],color:B[Math.round(Math.random()*(B.length-1))],scale:[1+14*t,1+14*t,1],rotation:[0,0,S.Math.degToRad(45*Math.round(Math.random()))]}},N=new Array(35).fill().map((function(){return{shape:_[Math.round(Math.random()*(_.length-1))],color:B[Math.round(Math.random()*(B.length-1))],args:[.1+9*Math.random(),.1+9*Math.random(),10]}}));function G(){var e=Object(R.b)(35,(function(e){return Object(M.a)({from:z(e)},z(e),{config:{mass:20,tension:150,friction:50}})})),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){setInterval((function(){return r((function(e){return Object(M.a)({},z(e),{delay:40*e})}))}),3e3)}),[r]),N.map((function(e,t){return c.a.createElement(R.a.mesh,Object.assign({key:t},n[t],{castShadow:!0,receiveShadow:!0}),c.a.createElement("boxBufferGeometry",{args:e.args}),c.a.createElement(R.a.meshStandardMaterial,{color:n[t].color,roughness:.75,metalness:.5}))}))}function q(){return c.a.createElement("group",null,c.a.createElement("pointLight",{intensity:.3}),c.a.createElement("ambientLight",{intensity:2}),c.a.createElement("spotLight",{castShadow:!0,intensity:.2,angle:Math.PI/7,position:[150,150,250],penumbra:1,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048}))}var J=function(){return c.a.createElement(A.a,{style:{background:"rgb(0,0,0)"},camera:{position:[0,0,100],fov:1e3}},c.a.createElement(q,null),c.a.createElement("mesh",{receiveShadow:!0},c.a.createElement("planeBufferGeometry",{args:[1e3,1e3]}),c.a.createElement("meshStandardMaterial",{color:"#A2ACB6",roughness:1})),c.a.createElement(G,null),c.a.createElement(I.a,null))},T=144,L=128,V=(n(901),n(840)),W=n.n(V),F=n(841),P=n.n(F),$=n(842);Object(A.e)($);var D=function(e){var t=e.fftValues;return c.a.createElement(c.a.Fragment,null,t.forEach((function(e,t){console.log(e,t)})))},H=n(15),K=n(843),Q=function(e){return e.includes("#")||e.includes("+")};var U=function(e){var t=Object(K.connect)(e),n=new Map;return t.on("connect",console.log),t.on("disconnect",console.log),t.on("error",console.error),t.on("message",(function(e,t){n.forEach((function(n,a){(e===a||Q(a)&&function(e,t){if(e===t)return[];if("#"===t)return[e];for(var n=[],a=String(e).split("/"),c=String(t).split("/"),r=0,o=a.length;r<o;r++)if("+"===c[r])n.push(a[r]);else{if("#"===c[r])return n.push(a.slice(r).join("/")),n;if(c[r]!==a[r])return null}return"#"===c[r]&&(r+=1),r===c.length?n:null}(e,a))&&n.forEach((function(e){try{e(a,JSON.parse(t.toString()))}catch(n){e(a,{})}}))}))})),function(){return{subscribe:function(e,a){var c=n.get(e);if(n.set(e,[].concat(Object(H.a)(c||[]),[a])),t.subscribe(e),!n.get(e))throw new Error("useClient: ".concat(e," does not exist"))},publish:function(e,n){if(Q(e))throw new Error("useTopic: Tried publishing on wildcard topic ".concat(e));t.publish(e,JSON.stringify(n))},unsubscribe:function(e){n.delete(e),t.unsubscribe(e)},getClient:function(){return t}}}}("wss://try:try@broker.shiftr.io"),X="vgig";function Y(){var e=Object(i.a)(["\n  width: 100%;\n  height: 66%;\n"]);return Y=function(){return e},e}var Z=s.a.div(Y()),ee=function(e){var t=e.id,n=Object(a.useState)(null),r=Object(d.a)(n,2),o=(r[0],r[1]),i=Object(a.useState)(null),l=Object(d.a)(i,2),u=(l[0],l[1]),s=Object(a.useState)(null),f=Object(d.a)(s,2),h=f[0],p=f[1],g=Object(a.useState)(null),b=Object(d.a)(g,2),v=b[0],j=b[1],O=Object(a.useState)(null),E=Object(d.a)(O,2),w=E[0],k=E[1],x=Object(a.useState)(null),y=Object(d.a)(x,2),C=y[0],M=y[1],S=Object(a.useState)(null),R=Object(d.a)(S,2),B=R[0],_=R[1],z=Object(a.useState)([]),N=Object(d.a)(z,2),G=N[0],q=N[1],J=U(),V=J.subscribe,F=J.unsubscribe;return Object(a.useEffect)((function(){var e=new m.b;e.connect(m.c),o(e);var t=new m.a;e.connect(t),u(t),setInterval((function(){t&&q(t.getValue())}),50);var n=new m.i({C3:W.a}),a=new m.e(.6,5e3),c=new m.h({delayTime:"32n",feedback:.7,wet:.25});n.volume.value=0,n.connect(c),c.connect(a),a.connect(e),p(n);var r=new m.i({C3:P.a});r.volume.value=0,r.connect(e),j(r);var i=new m.d({volume:0,detune:0,portamento:0,harmonicity:3,oscillator:{partialCount:0,partials:[],phase:0,type:"sine"},envelope:{attack:.01,attackCurve:"linear",decay:.2,decayCurve:"exponential",release:.5,releaseCurve:"exponential",sustain:1},modulation:{partialCount:0,partials:[],phase:0,type:"square"},modulationEnvelope:{attack:.2,attackCurve:"linear",decay:.01,decayCurve:"exponential",release:.5,releaseCurve:"exponential",sustain:1},modulationIndex:12.22});i.connect(e),k(i);var l=new m.f({frequency:200,envelope:{attack:.001,decay:1.4,release:.2},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5});l.connect(e),M(l);var s=new m.g;s.connect(e),_(s)}),[]),Object(a.useEffect)((function(){V("".concat(X,"/").concat(t,"/orchestra"),(function(e,t){console.log(t);var n=t.channel,a=t.note,c=t.status;switch(n){case 1:h&&h.triggerAttackRelease(a);break;case 2:v&&v.triggerAttackRelease(a);break;case 3:w&&c===T&&w.triggerAttack(a),w&&c===L&&w.triggerRelease(a);break;case 4:C&&c===T&&C.triggerAttack(a),C&&c===L&&C.triggerRelease(a);break;case 5:B&&c===T&&B.triggerAttack(),B&&c===L&&B.triggerRelease()}}))}),[h,v,t],(function(){F("".concat(X,"/").concat(t,"/orchestra"))})),c.a.createElement(Z,null,c.a.createElement(A.a,{style:{background:"rgb(0,0,0)"},camera:{position:[0,0,10],fov:25}},c.a.createElement(I.a,null),c.a.createElement(D,{fftValues:G})))},te=function(e){for(var t="",n="abcdefghijklmnopqrstuvwxyz0123456789",a=n.length,c=0;c<e;c++)t+=n.charAt(Math.floor(Math.random()*a));return t},ne=c.a.createContext(),ae=function(e){var t=e.children,n=Object(a.useState)({userId:te(8)}),r=Object(d.a)(n,2),o=r[0],i=r[1];return c.a.createElement(ne.Provider,{value:[o,i]},t)},ce=ne,re=n(844),oe=n.n(re),ie=n(845),le=n.n(ie),ue=n(846),se=n.n(ue),de=n(847),fe=n.n(de),he=n(848),me=n.n(he),pe=n(849),ge=n.n(pe),be=n(165),ve=n.n(be),je=n(850),Oe=n.n(je),Ee=n(851),we=n.n(Ee),ke=n(852),xe=n.n(ke),ye=n(853),Ce=n.n(ye),Me=n(854),Se=n.n(Me),Ie=n(855),Ae=n.n(Ie);function Re(){var e=Object(i.a)(["\nposition: absolute;\ntop: 0;\nright: 0;\nwidth: 33.33vw;\nheight: 100vh;\nbackground-color: rgba(144,238,144,0.7);\n"]);return Re=function(){return e},e}var Be=s.a.div(Re()),_e=["applaude","talk","photograph","walk","sneeze","cough","dance","shout","singAlong","phone"],ze=function(){var e=Object(a.useContext)(ce),t=Object(d.a)(e,1)[0],n=U(),r=n.subscribe,o=n.publish,i=n.getClient,l=Object(a.useState)(null),u=Object(d.a)(l,2),s=u[0],h=u[1],p=Object(a.useState)(null),g=Object(d.a)(p,2),b=g[0],v=g[1],j=Object(a.useState)(null),O=Object(d.a)(j,2),E=O[0],w=O[1],k=Object(a.useState)(null),x=Object(d.a)(k,2),y=x[0],C=x[1],M=Object(a.useState)(null),S=Object(d.a)(M,2),I=S[0],A=S[1],R=Object(a.useState)(null),B=Object(d.a)(R,2),_=B[0],z=B[1],N=Object(a.useState)(null),G=Object(d.a)(N,2),q=G[0],J=G[1],T=Object(a.useState)(null),L=Object(d.a)(T,2),V=L[0],W=L[1],F=Object(a.useState)(null),P=Object(d.a)(F,2),$=P[0],D=P[1],H=Object(a.useState)(null),K=Object(d.a)(H,2),Q=K[0],Y=K[1],Z=Object(a.useState)(null),ee=Object(d.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(null),re=Object(d.a)(ae,2),ie=re[0],ue=re[1],de=Object(a.useState)(null),he=Object(d.a)(de,2),pe=(he[0],he[1]);return Object(a.useEffect)((function(){var e=new m.b(-32);e.toDestination(),pe(e);var t=new m.i({C3:oe.a});t.connect(e),w(t);var n=new m.i({C3:ge.a});n.connect(e),z(n);var a=new m.i({C2:le.a,C3:se.a,C4:fe.a});a.connect(e),C(a);var c=new m.i({C3:me.a});c.connect(e),A(c);var r=new m.i({C3:ve.a});r.connect(e),h(r);var o=new m.i({C3:ve.a});o.connect(e),v(o);var l=new m.i({C3:xe.a});l.connect(e),J(l);var u=new m.i({C3:Ce.a});u.connect(e),W(u);var s=new m.i({C3:Se.a});s.connect(e),ne(s);var d=new m.i({C3:Ae.a});d.connect(e),ue(d);var f=new m.i({C3:Oe.a});f.connect(e),D(f);var p=new m.i({C3:we.a});p.connect(e),Y(p),i().on("connect",(function(){console.log("client connected")}))}),[]),Object(a.useEffect)((function(){r("".concat(X,"/").concat(t.hallId,"/applaude"),(function(e,t){E.triggerAttackRelease(40+Math.round(60*Math.random()),20)})),r("".concat(X,"/").concat(t.hallId,"/talk"),(function(e,t){y.triggerAttackRelease(20+Math.round(60*Math.random()),20)})),r("".concat(X,"/").concat(t.hallId,"/shout"),(function(e,t){I.triggerAttackRelease(40+Math.round(60*Math.random()),20)})),r("".concat(X,"/").concat(t.hallId,"/singAlong"),(function(e,t){console.log("singalong"),_.triggerAttackRelease(40+Math.round(60*Math.random()),20)})),r("".concat(X,"/").concat(t.hallId,"/enter"),(function(e,t){s.triggerAttackRelease(72,20),console.log("user entered",t)})),r("".concat(X,"/").concat(t.hallId,"/leave"),(function(e,t){console.log("user left",t)})),r("".concat(X,"/").concat(t.hallId,"/photograph"),(function(e,t){q.triggerAttackRelease(40+Math.round(60*Math.random()),20)})),r("".concat(X,"/").concat(t.hallId,"/phone"),(function(e,t){V.triggerAttackRelease(40+Math.round(60*Math.random()),20)})),r("".concat(X,"/").concat(t.hallId,"/walk"),(function(e,t){te.triggerAttackRelease(40+Math.round(60*Math.random()),20)})),r("".concat(X,"/").concat(t.hallId,"/dance"),(function(e,t){ie.triggerAttackRelease(40+Math.round(60*Math.random()),20)})),r("".concat(X,"/").concat(t.hallId,"/sneeze"),(function(e,t){$.triggerAttackRelease(40+Math.round(60*Math.random()),20)})),r("".concat(X,"/").concat(t.hallId,"/cough"),(function(e,t){Q.triggerAttackRelease(50+Math.round(60*Math.random()),20)}))}),[t.hallId,E,y,_,te,V,q,ie,Q,$,s,b]),c.a.createElement(Be,null,_e.map((function(e){return c.a.createElement(f.a,{key:e,variant:"contained",color:"primary",onClick:function(){o("".concat(X,"/").concat(t.hallId,"/").concat(e),{userId:t.userId})}},e)})))};function Ne(){var e=Object(i.a)(["\n    .audience {\n        width: 100%;\n        height: 33%;\n    }\n    width: 100%;\n    height: 100%;\n"]);return Ne=function(){return e},e}var Ge=s.a.div(Ne()),qe=function(){var e=Object(u.g)().id,t=Object(a.useContext)(ce),n=Object(d.a)(t,2),r=n[0],o=n[1],i=U().publish;return Object(a.useEffect)((function(){console.log("entering"),o(Object(M.a)({},r,{hallId:e})),i("".concat(X,"/").concat(e,"/enter"),{userId:r.userId})}),[e]),c.a.createElement(Ge,null,c.a.createElement(ee,{className:"orchestra",id:e}),c.a.createElement(J,{className:"audience",id:e}),c.a.createElement(ze,{className:"interactions",id:e}))};function Je(){var e=Object(i.a)(["\n  width: 100vw;\n  height: 100vh;\n"]);return Je=function(){return e},e}var Te=s.a.div(Je()),Le=function(){return c.a.createElement(Te,null,c.a.createElement(l.a,null,c.a.createElement(u.c,null,c.a.createElement(u.a,{path:"/halls/:id"},c.a.createElement(ae,{value:ce},c.a.createElement(qe,null))),c.a.createElement(u.a,{path:"/"},c.a.createElement(C,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},165:function(e,t,n){e.exports=n.p+"static/media/enter.339b495d.mp3"},828:function(e){e.exports=JSON.parse('{"name":"vgig","homepage":"https://thomasgeissl.github.io/vgig","version":"0.1.0","private":true,"dependencies":{"@material-ui/core":"^4.11.0","@material-ui/icons":"^4.9.1","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","drei":"^1.5.7","gh-pages":"^3.1.0","mqtt":"^4.2.1","nosleep.js":"^0.11.0","react":"^16.13.1","react-dom":"^16.13.1","react-redux":"^7.2.1","react-router-dom":"^5.2.0","react-scripts":"3.4.3","react-spring":"^8.0.27","react-three-fiber":"^5.0.1","redux":"^4.0.5","styled-components":"^5.2.0","three":"^0.120.1","threejs-meshline":"^2.0.12","tone":"^14.7.39","typescript":"^4.0.3"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","deploy":"yarn build && gh-pages -d build","travisdeploy":"CI=false yarn build && gh-pages -d build -r https://$GH_TOKEN@github.com/thomasgeissl/vgig.git"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},840:function(e,t,n){e.exports=n.p+"static/media/unacorda_C3.4c254059.mp3"},841:function(e,t,n){e.exports=n.p+"static/media/jarbleambiencepad_C3.3312bc03.mp3"},844:function(e,t,n){e.exports=n.p+"static/media/clapping.31212348.mp3"},845:function(e,t,n){e.exports=n.p+"static/media/talk_C2.4fdd1dcf.mp3"},846:function(e,t,n){e.exports=n.p+"static/media/talk_C3.f2a775cc.mp3"},847:function(e,t,n){e.exports=n.p+"static/media/talk_C4.cfab9d69.mp3"},848:function(e,t,n){e.exports=n.p+"static/media/shout.b39ade0c.mp3"},849:function(e,t,n){e.exports=n.p+"static/media/singAlong.6896ef66.mp3"},850:function(e,t,n){e.exports=n.p+"static/media/sneeze.62f3207f.mp3"},851:function(e,t,n){e.exports=n.p+"static/media/cough.9e20177b.mp3"},852:function(e,t,n){e.exports=n.p+"static/media/photograph.437bf6fd.mp3"},853:function(e,t,n){e.exports=n.p+"static/media/phone.9417a5f0.mp3"},854:function(e,t,n){e.exports=n.p+"static/media/walk.6a028ea7.mp3"},855:function(e,t,n){e.exports=n.p+"static/media/dance.b39ade0c.mp3"},876:function(e,t,n){e.exports=n(1007)},880:function(e,t,n){},901:function(e,t,n){e.exports=n.p+"static/media/violin_c3.bbc9708e.mp3"},904:function(e,t){},906:function(e,t){},975:function(e,t){},977:function(e,t){}},[[876,1,2]]]);
//# sourceMappingURL=main.a01ca05d.chunk.js.map